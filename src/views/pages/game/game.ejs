<div class="container-fluid px-0 game-container">
    <!-- Header da Partida -->
    <div class="game-header bg-gradient shadow-sm p-3 mb-4">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-4">
                    <div class="game-info">
                        <h5 class="mb-1"><i class="bi bi-controller"></i> Partida</h5>
                        <small class="text-muted">ID: <span id="partidaId">Carregando...</span></small>
                    </div>
                </div>
                <div class="col-md-4 text-center">
                    <div class="score-display">
                        <h3 class="mb-0 fw-bold text-primary">
                            <i class="bi bi-trophy-fill text-warning"></i>
                            <span id="scoreAtual">0</span>
                        </h3>
                        <small class="text-muted">Pontuação Atual</small>
                    </div>
                </div>
                <div class="col-md-4 text-end">
                    <div class="game-stats">
                        <div class="mb-2">
                            <i class="bi bi-heart-fill text-danger"></i> Vidas: <strong id="vidasRestantes">3</strong>
                        </div>
                        <button class="btn btn-danger btn-sm" id="btnAbandonar">
                            <i class="bi bi-door-open"></i> Abandonar Partida
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Área do Jogo -->
    <div class="container-fluid">
        <div class="row">
            <!-- Grafo (Área Principal) -->
            <div class="col-lg-9">
                <div class="card shadow-sm card-custom mb-4">
                    <div class="card-header text-dark" style="background-color: var(--marrom_escuro);">
                        <h5 class="mb-0">
                            <i class="bi bi-diagram-3"></i> Grafo
                            <small class="text-muted ms-3" style="font-size: 0.85rem;">
                                <i class="bi bi-info-circle"></i> Clique em um nó para ver depoimento e chutar | Shift+Clique para criar arestas
                            </small>
                        </h5>
                    </div>
                    <div class="card-body" style="background-color: #f8f9fa;">
                        <div id="grafoArea" style="min-height: 550px; position: relative;">
                            <svg id="grafoSVG" class="graph-svg"></svg>
                        </div>
                    </div>
                    <div class="card-footer bg-light">
                        <div class="d-flex gap-2 align-items-center justify-content-center">
                            <button class="btn btn-warning" id="btnDica" disabled>
                                <i class="bi bi-lightbulb"></i> Pedir Dica (Revela Grafo Completo - Reduz pontuação)
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Depoimentos (Painel Lateral) -->
            <div class="col-lg-3">
                <div class="card shadow-sm card-custom mb-4" style="position: sticky; top: 20px;">
                    <div class="card-header text-dark" style="background-color: var(--marrom_escuro);">
                        <h5 class="mb-0"><i class="bi bi-chat-dots"></i> Depoimentos</h5>
                    </div>
                    <div class="card-body" style="max-height: 600px; overflow-y: auto;">
                        <div id="depoimentosList"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Popup para informações do nó -->
    <div id="popup" class="hidden" style="position: absolute; background: white; border: 2px solid #333; border-radius: 8px; padding: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.25); z-index: 10000; min-width: 280px;">
        <!-- Conteúdo será injetado dinamicamente -->
    </div>
</div>

<!-- Scripts -->
<style>
    #grafoArea { 
        min-height: 550px; 
        position: relative;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 8px;
    }
    .graph-svg { 
        width: 100%; 
        height: 100%; 
        min-height: 550px;
    }
    .graph-svg line { 
        stroke: rgba(50, 50, 50, 0.35); 
        stroke-width: 1.2; 
    }
    .graph-svg line.user-link {
        stroke: #4CAF50;
        stroke-width: 3;
        opacity: 0.8;
    }
    .graph-svg circle { 
        stroke: #fff; 
        stroke-width: 2; 
        cursor: pointer;
        transition: all 0.2s ease;
    }
    .graph-svg circle:hover { 
        stroke-width: 3;
        filter: brightness(1.1);
    }
    .graph-svg text { 
        font-size: 0.75rem; 
        font-weight: bold;
        fill: #fff; 
        text-anchor: middle; 
        pointer-events: none;
        user-select: none;
    }
    .hidden { 
        display: none !important; 
    }
    #popup h3 {
        font-size: 1.1rem;
        margin-bottom: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    #popup .close-btn {
        background: none;
        border: none;
        font-size: 1.5rem;
        line-height: 1;
        cursor: pointer;
        color: #999;
    }
    #popup .close-btn:hover {
        color: #333;
    }
</style>
<!-- D3.js para manipulação de grafo -->
<script src="https://d3js.org/d3.v7.min.js"></script>

<!-- Game2 Script -->
<script src="/js/game.js"></script>
